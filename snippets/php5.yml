- name: php5_basics
  description: install PHP and apache/mysql modules
  steps:
  - run: apt-get install -y php5 php5-dev php5-cli php5-mysql libapache2-mod-php5

- name: php5_modules
  description: install extra PHP modules used by Drupal
  steps:
  - run: apt-get install -y php5-curl php5-gd php5-memcache php-apc

- name: composer
  description: |
    Install Composer under /usr/share/composer.
    Notes:
    - Composer expects to find either COMPOSER_HOME or HOME in the environment.
      Since `docker build` and `docker run` operate in non-login shells, we set
      COMPOSER_HOME here.
    - Non-root users in logins shells still can use Composer, but they will not
      have access to the root user's globally required packages in `/root/vendor`.
    - See https://getcomposer.org/download/
  steps:
  - run: mkdir -p /usr/share/composer
  - env:
      name: COMPOSER_HOME
      value: /root
  - run: wget https://getcomposer.org/composer.phar -O /usr/local/bin/composer
  - run: chmod +x /usr/local/bin/composer
